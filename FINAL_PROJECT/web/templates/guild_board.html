<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://unpkg.com/@yaireo/tagify/dist/tagify.css" rel="stylesheet" type="text/css" />
    <title>Guild dashboard</title>
</head>

<body class="bg-gray-800">
    <div class="relative top-0 left-0">
        {% if guild.banner_url == None %}
        <img class="relative top-0 left-0 max-h-40 w-screen object-cover border-b-2 border-blue-500"
            src="../static/img/default_banner.jpg" alt="banner of {{guild.name}}" />
        {% else %}
        <img class="relative top-0 left-0 max-h-40 w-screen object-cover border-b-2 border-blue-500"
            src="{{guild.banner_url}}" alt="banner of {{guild.name}}" />
        {% endif %}
        <button class="btn-primary btn-blue absolute top-1 left-5" onclick="document.location='../dashboard'"><i
                class="fa-solid fa-arrow-left mr-2"></i>Retour</button>
        {% if guild.icon_url == None %}
        <img class="absolute top-20 left-5 px-auto rounded-full border-4 border-green-400"
            src="../static/img/default.png" width="128px" height="128px" alt="image of {{guild.name}}" />
        {% else %}
        <img class="absolute top-20 left-5 px-auto rounded-full border-4 border-green-400" src="{{guild.icon_url}}"
            width="128px" height="128px" alt="image of {{guild.name}}" />
        {%endif%}
    </div>
    <div class="flex mb-4">
        <div class="w-1/6"></div>
        <div class="w-4/6">
            <p class="text-center text-white sm:mt-5 mt-14 text-2xl font-bold">{{guild.name}} <i
                    class="fa-solid fa-grip-lines-vertical pl-5 pr-5"></i> {{guild.member_count}} membres</p>
            <form name="options" action="" method="post">
                <div class="max-w-none mt-5 mb-5 px-4 py-4 shadow-md border bg-slate-300 border-gray-400 rounded-md">
                    <div class="flex flex-wrap justify-center items-center">
                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Pr√©fix du bot :</p>
                            <input type="text" name="setPrefix" id="prefix"
                                class="bg-gray-50 border mt-2 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-sm p-2.5"
                                placeholder="{{pref[0]}}" value="{{pref[0]}}" required>
                        </div>
                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Channel de bienvenu</p>
                            <select name="setWelcomeChannel" id="welcomeChannel"
                                class="bg-gray-50 border mt-2 border-gray-300 text-gray-900 max-w-xs text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-sm p-2.5">
                                {% for channel in guild.channels %}
                                    {% if channel == chan_1 %}
                                        <option value="{{channel}}" selected>{{guild.channels[channel]}}</option>
                                    {% else %}
                                        <option value="{{channel}}">{{guild.channels[channel]}}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Channel des logs</p>
                            <select name="setLogsChannel" id="logsChannel"
                                class="bg-gray-50 border mt-2 border-gray-300 text-gray-900 max-w-xs text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-sm p-2.5">
                                {% for channel in guild.channels %}
                                    {% if channel == chan_2 %}
                                        <option value="{{channel}}" selected>{{guild.channels[channel]}}</option>
                                    {% else %}
                                        <option value="{{channel}}">{{guild.channels[channel]}}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="flex flex-wrap">
                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Pseudo du bot :</p>
                            <input type="text" name="setNick" id="nickname"
                                class="bg-gray-50 border mt-2 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-sm p-2.5"
                                placeholder="Devbot" value="{{pref[3]}}" required>
                        </div>
                        <!-- <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Roles administrateurs</p>
                            <select x-cloak id="select" name="setAdminRoles" id="adminRoles"
                                class="bg-gray-50 border hidden border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-sm p-2.5"
                                multiple>
                                {% for role in roles %}
                                <option value="{{roles[role]}}">{{role}}</option>
                                {% endfor %}
                            </select>

                            MULTI SELECT FORM

                            <div x-data="dropdown()" x-init="loadOptions()"
                                class="border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-sm">
                                <input name="values" type="hidden" x-bind:value="selectedValues()">
                                <div class="inline-block relative w-64">
                                    <div class="flex flex-col items-center relative">
                                        <div x-on:click="open" class="w-full">
                                            <div class="my-2 p-1 flex border border-gray-200 bg-white rounded">
                                                <div class="flex flex-auto flex-wrap">
                                                    <template x-for="(option,index) in selected"
                                                        :key="options[option].value">
                                                        <div
                                                            class="flex justify-center items-center m-1 font-medium py-1 px-1 bg-white rounded border">
                                                            <div class="text-xs font-normal leading-none max-w-full flex-initial x-model="
                                                                options[option] x-text="options[option].text"></div>
                                                            <div class="flex flex-auto flex-row-reverse">
                                                                <div x-on:click.stop="remove(index,option)">
                                                                    <i class="text-thin mx-2 fa-solid fa-xmark"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <div x-show="selected.length == 0" class="flex-1">
                                                        <input placeholder="Select a option"
                                                            class="bg-transparent p-1 px-2 appearance-none outline-none h-full w-full text-gray-800"
                                                            x-bind:value="selectedValues()" disabled>
                                                    </div>
                                                </div>
                                                <div
                                                    class="text-gray-300 w-8 py-1 pl-2 pr-1 border-l flex items-center border-gray-200 svelte-1l8159u">
                                                    <button type="button" x-show="isOpen() === true" x-on:click="open"
                                                        class="cursor-pointer w-6 h-6 text-gray-600 outline-none focus:outline-none">
                                                        <i class="fas fa-chevron-up"></i>
                                                    </button>
                                                    <button type="button" x-show="isOpen() === false" @click="close"
                                                        class="cursor-pointer w-6 h-6 text-gray-600 outline-none focus:outline-none">
                                                        <i class="fas fa-chevron-down"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="w-full px-4">
                                            <div x-show.transition.origin.top="isOpen()"
                                                class="absolute shadow top-100 bg-white z-40 w-full left-0 rounded max-h-select"
                                                x-on:click.away="close">
                                                <div class="flex flex-col w-full overflow-y-auto h-64">
                                                    <template x-for="(option,index) in options" :key="option"
                                                        class="overflow-auto">
                                                        <div class="cursor-pointer w-full border-gray-100 rounded-t border-b hover:bg-gray-100"
                                                            @click="select(index,$event)">
                                                            <div
                                                                class="flex w-full items-center p-2 pl-2 border-transparent border-l-2 relative">
                                                                <div class="w-full items-center flex justify-between">
                                                                    <div class="mx-2 leading-6" x-model="option"
                                                                        x-text="option.text"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Nombre de warn avant ban (0 = no ban)</p>
                            <input class="mt-2 px-4 py-2 rounded-lg bg-white w-52" type="text" name="setWarnLimit" id="warnLimit" value="{{pref[6]}}" required>
                        </div>

                        <!-- MULTI SELECT TAGS INPUT  -->

                        <div class="w-full my-5 md:w-1/3">
                            <p class="font-sans">Banwords :</p>
                            <input class="mt-2 px-4 py-2 rounded-lg bg-white w-full" type="text" name="setBanwords" id="banwords" value="{{pref[5]}}" required>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-primary btn-blue mt-5 w-full">Save changes</button>
            </form>
        </div>
        <div class="w-1/6"></div>
    </div>

    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="../static/js/multiselect.js"></script>
    <script src="https://unpkg.com/@yaireo/tagify"></script>
    <script src="https://unpkg.com/@yaireo/tagify/dist/tagify.polyfills.min.js"></script>
    <script src="../static/js/tags.js"></script>
</body>

</html>